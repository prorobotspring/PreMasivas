<?xml version="1.0" encoding="UTF-8"?>
<config>
	<annotation>
		<documentation>
			Configuracion de los servicios para la preativacion Masiva
			en su Fase 2
		</documentation>
		<version>1.0</version>
	</annotation>
	<servicios>
		<servicio id="recepcion.suscriptor.hlr">
			<annotation>
				<documentation>
					Servicio para la recepcion del response enviado por
					IL
				</documentation>
			</annotation>
			<comandos>
				<comando delegador="encolarResponseSuscriptorHLR"
					servicio="obtener.request.ivr">
					<parametros>
						<parametro formal="relatesTo"
							actual="relatesTo" />
						<parametro formal="status" actual="status" />
						<parametro formal="sMessage" actual="sMessage" />
						<parametro formal="task" actual="task" />
						<parametro formal="order" actual="order" />
					</parametros>
					<retorno ignorar="y" codes="*" />
				</comando>
			</comandos>
		</servicio>

		<servicio id="obtener.request.ivr">
			<annotation>
				<documentation>
					Servicio para el registro del suscriptor en IVR
				</documentation>
			</annotation>
			<comandos>
				<comando delegador="obtenerRequestIVR"
					servicio="registrar.suscriptor.ivr">
					<parametros>
						<parametro formal="relatesTo"
							actual="relatesTo" />
						<parametro formal="status" actual="status" />
						<parametro formal="sMessage" actual="sMessage" />
						<parametro formal="task" actual="task" />
						<parametro formal="order" actual="order" />						
					</parametros>
					<retorno ignorar="y" codes="*" />
				</comando>
			</comandos>
		</servicio>

		<servicio id="registrar.suscriptor.ivr">
			<annotation>
				<documentation>
					Servicio para el registro del suscriptor en IVR
				</documentation>
			</annotation>
			<comandos>
				<comando delegador="eliminarRequestDB"
					servicio="eliminar.request.db">
					<condiciones>
						<comando delegador="local" servicio="cond:in">
							<parametros ambito="local">
								<parametro formal="lvalor"
									actual="status" />
								<parametro formal="rvalor"
									constante="10077" />
							</parametros>
						</comando>						
					</condiciones>
					<parametros>
						<parametro formal="relatesTo"
							actual="relatesTo" />
						<parametro formal="status" actual="status" />
						<parametro formal="sMessage" actual="sMessage" />
						<parametro formal="task" actual="task" />
						<parametro formal="order" actual="order" />						
					</parametros>
					<retorno ignorar="y" codes="*" />
				</comando>
				<comando delegador="solicitudRegistroArchivo"
					servicio="generar.archivo.salida">
					<condiciones>
						<comando delegador="local" servicio="cond:in">
							<parametros ambito="local">
								<parametro formal="lvalor" actual="status" />
								<parametro formal="rvalor" constante="10077" />
								<parametro formal="negado" constante="true" type="java.lang.Boolean" />
							</parametros>
						</comando>
					</condiciones>
					<parametros ambito="global">
						<parametro formal="error" actual="status" />
					</parametros>
					<retorno ignorar="y" codes="*" />
				</comando>
				<comando delegador="registrarEstado"
					servicio="registrar.estado">
					<parametros ambito="local">
						<parametro formal="reportedFrom"
							constante="HLR" />
						<parametro formal="ERROR" actual="status" />
						<parametro formal="ERROR_MSG" actual="sMessage" />
						<parametro formal="sistema" constante="rtbs" />
						<parametro formal="proceso"
							constante="preactivacion" />
						<parametro formal="NOMARCHIVO"
							actual="batchName" />
						<parametro formal="ID" actual="traceid" />
						<parametro formal="FECHA" actual="fecha" />
						<parametro formal="GSM" actual="msisdn" />
						<parametro formal="IMSI" actual="imsi" />
						<parametro formal="ICCID" actual="iccid" />
						<parametro formal="PIN" actual="pin" />
						<parametro formal="PIN1" actual="pin1" />
						<parametro formal="PUK" actual="puk" />
						<parametro formal="PUK2" actual="puk2" />	
					</parametros>
				</comando>
				<comando delegador="registrarSuscriptorIVR"
					servicio="registrar.suscriptor.ivr">
					<condiciones>
						<comando delegador="local" servicio="cond:in">
							<parametros ambito="local">
								<parametro formal="lvalor"
									actual="status" />
								<parametro formal="rvalor"
									constante="0" />
							</parametros>
						</comando>
					</condiciones>
					<parametros>
						<parametro formal="relatesTo"
							actual="relatesTo" />
						<parametro formal="status" actual="status" />
						<parametro formal="sMessage" actual="sMessage" />
						<parametro formal="task" actual="task" />
						<parametro formal="order" actual="order" />
						<parametro formal="batchName"
							actual="batchName" />
						<parametro formal="msisdn" actual="msisdn" />
						<parametro formal="imsi" actual="imsi" />
						<parametro formal="iccid" actual="iccid" />
						<parametro formal="pin" actual="pin" />
						<parametro formal="puk" actual="puk" />
						<parametro formal="pin1" actual="pin1" />
						<parametro formal="puk2" actual="puk2" />
					</parametros>
					<retorno ignorar="y" codes="*" />
				</comando>
				<comando delegador="local" servicio="stm:setAll">
					<parametros ambito="local">
						<parametro formal="nameList"
							constante="_rc_resultado_ivr _rc_razon_ivr" />
						<parametro formal="rvalor_1"
							actual="_rc_resultado" />
						<parametro formal="rvalor_2" actual="_rc_razon" />
					</parametros>
					<retorno ignorar="y" codes="*" />
				</comando>
				<comando delegador="ArchivoErrorIVR"
					servicio="archivo.error.ivr">
					<condiciones>
						<comando delegador="local" servicio="cond:in">
							<parametros ambito="local">
								<parametro formal="lvalor"
									actual="_rc_resultado_ivr" />
								<parametro formal="rvalor"
									constante="0" />
								<parametro formal="negado"
									constante="true" type="java.lang.Boolean" />
							</parametros>
						</comando>
					</condiciones>
					<parametros ambito="global">
						<parametro formal="error"
							actual="_rc_resultado_ivr" />
						<parametro formal="razon"
							actual="_rc_razon_ivr" />
					</parametros>
					<retorno ignorar="y" codes="*" />
				</comando>
				<comando delegador="cargarUsuario3gAutenticador" servicio="cargar.usuario.autenticador">
					<condiciones>
						<comando delegador="local" servicio="cond:in">
							<parametros ambito="local">
								<parametro formal="lvalor" actual="status" />
								<parametro formal="rvalor" constante="0" />
							</parametros>
						</comando>								
						<comando delegador="local" servicio="cond:in">
							<parametros ambito="local">
								<parametro formal="lvalor" actual="profile" />
								<parametro formal="rvalor" constante="05 08" />
							</parametros>
						</comando>
					</condiciones>
					<parametros>						
						<parametro formal="batchName" actual="batchName" />
						<parametro formal="msisdn" actual="msisdn" />
						<parametro formal="imsi" actual="imsi" />
						<parametro formal="iccid" actual="iccid" />
						<parametro formal="pin" actual="pin" />
						<parametro formal="puk" actual="puk" />
						<parametro formal="pin1" actual="pin1" />
						<parametro formal="puk2" actual="puk2" />
					</parametros>
					<retorno ignorar="y" codes="*" />
				</comando>	
				<comando delegador="local" servicio="stm:setAll">
					<parametros ambito="local">
						<parametro formal="nameList"
							constante="_rc_resultado_aut _rc_razon_aut" />
						<parametro formal="rvalor_1"
							actual="_rc_resultado" />
						<parametro formal="rvalor_2" actual="_rc_razon" />
					</parametros>
					<retorno ignorar="y" codes="*" />
				</comando>
				<comando delegador="ArchivoErrorAutenticador" servicio="archivo.error.autenticador">
					<condiciones>
						<comando delegador="local" servicio="cond:in">
							<parametros ambito="local">
								<parametro formal="lvalor" actual="_rc_resultado_aut" />
								<parametro formal="rvalor" constante="0" />		
								<parametro formal="negado" constante="true" type="java.lang.Boolean" />
							</parametros>
						</comando>
					</condiciones>
					<parametros ambito="global">
						<parametro formal="error" actual="_rc_resultado_aut" />
						<parametro formal="razon" actual="_rc_razon_aut" />
					</parametros>
					<retorno ignorar="y" codes="*" />
				</comando>
				<comando delegador="reintentoAprovisionamientoHLR"
					servicio="aprovisionar.suscriptor.hlr">
					<condiciones>
						<comando delegador="local" servicio="cond:in">
							<parametros ambito="local">
								<parametro formal="lvalor"
									actual="status" />
								<parametro formal="rvalor"
									constante="10077" />
							</parametros>
						</comando>
						<comando delegador="local" servicio="cond:menor">
							<parametros>
								<parametro formal="lvalor" actual="reintentosIL" type="java.lang.Integer"/>
								<parametro formal="rvalor" constante="3" type="java.lang.Integer" />
							</parametros>
						</comando>
					</condiciones>
					<parametros ambito="global">												
						<parametro formal="_rc_reintentos_il" actual="_rc_reintentos_il" type="java.lang.Double" defaultValue="0" />						
					</parametros>
					<retorno ignorar="y" codes="*" />
				</comando>						
				<comando delegador="rollbackCrearSuscriptorRTBS"
					servicio="rollback.suscriptor.rtbs">
					<condiciones>						
						<comando delegador="local" servicio="cond:in">
							<parametros ambito="local">
								<parametro formal="lvalor"
									actual="status" />
								<parametro formal="rvalor"
									constante="0 10077" />
								<parametro formal="negado"
									constante="true" type="java.lang.Boolean" />
							</parametros>
						</comando>												
					</condiciones>
					<parametros ambito="global">						
						<parametro formal="actividad" constante="ActivarSuscriptor" />
						<parametro formal="_rc_reintentos" actual="_rc_reintentos" type="java.lang.Double" defaultValue="0" />						
					</parametros>
					<retorno ignorar="y" codes="*" />
				</comando>
				<comando delegador="registrarEstado"
					servicio="registrar.estado">
					<condiciones>
						<comando delegador="local" servicio="cond:in">
							<parametros ambito="local">
								<parametro formal="lvalor"
									actual="status" />
								<parametro formal="rvalor"
									constante="0" />
							</parametros>
						</comando>
					</condiciones>
					<parametros ambito="local">
						<parametro formal="reportedFrom"
							constante="IVR" />
						<parametro formal="ERROR"
							actual="_rc_resultado_ivr" />
						<parametro formal="ERROR_MSG"
							actual="_rc_razon_ivr" />
						<parametro formal="sistema" constante="rtbs" />
						<parametro formal="proceso"
							constante="preactivacion" />
						<parametro formal="NOMARCHIVO"
							actual="batchName" />
						<parametro formal="ID" actual="traceid" />
						<parametro formal="FECHA" actual="fecha" />
						<parametro formal="GSM" actual="msisdn" />
						<parametro formal="IMSI" actual="imsi" />
						<parametro formal="ICCID" actual="iccid" />
						<parametro formal="PIN" actual="pin" />
						<parametro formal="PIN1" actual="pin1" />
						<parametro formal="PUK" actual="puk" />
						<parametro formal="PUK2" actual="puk2" />
					</parametros>
				</comando>
			</comandos>
		</servicio>

	</servicios>

	<delegadores>

		<delegador id="local" constructor="class"
			nombre="ve.com.digitel.premasivas.fase2.delegator.LocalClassDelegator">
			<servicioDelegado id="cond:in"
				nombre="ve.com.digitel.premasivas.fase2.filtros.Incluido" />
			<servicioDelegado id="cond:menor"
				nombre="ve.com.digitel.premasivas.fase2.filtros.Menor" />
			<servicioDelegado id="stm:set"
				nombre="ve.com.digitel.premasivas.fase2.command.Set" />
			<servicioDelegado id="stm:setAll"
				nombre="ve.com.digitel.premasivas.fase2.command.SetAll" />
		</delegador>

		<delegador id="encolarResponseSuscriptorHLR" constructor="class"
			nombre="ve.com.digitel.premasivas.fase2.delegator.SolicitudQueueSubmiterDelegator">
			<initParams>
				<initParam>
					<name>queue</name>
					<value>
						application.premasivas.fase2.solicitud.queue
					</value>
				</initParam>
				<initParam>
					<name>factory</name>
					<value>
						application.premasivas.fase2.solicitud.factory
					</value>
				</initParam>
				<initParam>
					<name>context</name>
					<value>
						application.premasivas.initial_context_factory
					</value>
				</initParam>
				<initParam>
					<name>providerURL</name>
					<value>application.premasivas.provider_url</value>
				</initParam>
			</initParams>
		</delegador>
		<delegador id="eliminarRequestDB" constructor="class"
			nombre="ve.com.digitel.premasivas.fase2.delegator.EliminarRespaldoDB">
			<initParams>
				<initParam>
					<name>providerURL</name>
					<value>application.premasivas.provider_url</value>
				</initParam>
				<initParam>
					<name>context</name>
					<value>
						application.premasivas.initial_context_factory
					</value>
				</initParam>
				<initParam>
					<name>dataSource</name>
					<value>
						application.premasivas.respaldo.request.dataSource
					</value>
				</initParam>
				<initParam>
					<name>queryDelete</name>
					<value>
						application.premasivas.respaldo.request.delete
					</value>
				</initParam>
			</initParams>
		</delegador>
		<delegador id="obtenerRequestIVR" constructor="class"
			nombre="ve.com.digitel.premasivas.fase2.delegator.ObtenerRequestDelegator">
			<initParams>
				<initParam>
					<name>providerURL</name>
					<value>application.premasivas.provider_url</value>
				</initParam>
				<initParam>
					<name>context</name>
					<value>
						application.premasivas.initial_context_factory
					</value>
				</initParam>
				<initParam>
					<name>dataSource</name>
					<value>
						application.premasivas.respaldo.request.dataSource
					</value>
				</initParam>
				<initParam>
					<name>querySelect</name>
					<value>
						application.premasivas.respaldo.request.select
					</value>
				</initParam>
				<initParam>
					<name>queue</name>
					<value>
						application.premasivas.fase2.solicitud.queue
					</value>
				</initParam>
				<initParam>
					<name>factory</name>
					<value>
						application.premasivas.fase2.solicitud.factory
					</value>
				</initParam>
			</initParams>
		</delegador>
		<delegador id="registrarSuscriptorIVR" constructor="class"
			nombre="ve.com.digitel.premasivas.fase2.delegator.RegistrarSuscriptorIVRDelegator">
			<initParams>
				<initParam>
					<name>providerURL</name>
					<value>application.premasivas.provider_url</value>
				</initParam>
				<initParam>
					<name>context</name>
					<value>
						application.premasivas.initial_context_factory
					</value>
				</initParam>
				<initParam>
					<name>dataSource</name>
					<value>
						application.premasivas.registro.ivr.dataSource
					</value>
				</initParam>
			</initParams>
		</delegador>
		<delegador id="registrarEstado" constructor="class"
			nombre="ve.com.digitel.premasivas.fase2.delegator.StateQueueSubmiterDelegator">
			<initParams>
				<initParam>
					<name>factory</name>
					<value>
						application.premasivas.control.factory
					</value>
				</initParam>
				<initParam>
					<name>queue</name>
					<value>application.premasivas.control.queue</value>
				</initParam>
				<initParam>
					<name>context</name>
					<value>
						application.premasivas.initial_context_factory
					</value>
				</initParam>
				<initParam>
					<name>providerURL</name>
					<value>
						application.control.service.provider_url
					</value>
				</initParam>
			</initParams>
		</delegador>

		<delegador id="reintentoAprovisionamientoHLR" constructor="class"
			nombre="ve.com.digitel.premasivas.fase2.delegator.ReintentoAprovisionamientoHLR">
			<initParams>
				<initParam>
					<name>factory</name>
					<value>
						application.premasivas.solicitud.factory
					</value>
				</initParam>
				<initParam>
					<name>queue</name>
					<value>
						application.premasivas.solicitud.queue
					</value>
				</initParam>
				<initParam>
					<name>context</name>
					<value>
						application.premasivas.initial_context_factory
					</value>
				</initParam>
				<initParam>
					<name>providerURL</name>
					<value>application.premasivas.provider_url</value>
				</initParam>
			</initParams>
		</delegador>

		<delegador id="rollbackCrearSuscriptorRTBS" constructor="class"
			nombre="ve.com.digitel.premasivas.fase2.delegator.RollbackRTBSSubmiterDelegator">
			<initParams>
				<initParam>
					<name>factory</name>
					<value>
						application.premasivas.solicitud.factory
					</value>
				</initParam>
				<initParam>
					<name>queue</name>
					<value>
						application.premasivas.solicitud.queue
					</value>
				</initParam>
				<initParam>
					<name>context</name>
					<value>
						application.premasivas.initial_context_factory
					</value>
				</initParam>
				<initParam>
					<name>providerURL</name>
					<value>application.premasivas.provider_url</value>
				</initParam>
			</initParams>
		</delegador>

		<delegador id="solicitudRegistroArchivo" constructor="class"
			nombre="ve.com.digitel.premasivas.fase2.delegator.SolicitudArchivoSubmiterDelegator">
			<initParams>
				<initParam>
					<name>factory</name>
					<value>
						application.premasivas.solicitud.factory
					</value>
				</initParam>
				<initParam>
					<name>queue</name>
					<value>
						application.premasivas.solicitud.queue
					</value>
				</initParam>
				<initParam>
					<name>context</name>
					<value>
						application.premasivas.initial_context_factory
					</value>
				</initParam>
				<initParam>
					<name>providerURL</name>
					<value>application.premasivas.provider_url</value>
				</initParam>
			</initParams>
		</delegador>
		<delegador id="ArchivoErrorIVR" constructor="class"
			nombre="ve.com.digitel.premasivas.fase2.delegator.GenerarArchivoIVRDelegator">
			<initParams>
				<initParam>
					<name>ivrDirectory</name>
					<value>application.premasivas.temp</value>
				</initParam>
			</initParams>
		</delegador>
	
		<delegador id="cargarUsuario3gAutenticador" constructor="class"
			nombre="ve.com.digitel.premasivas.fase2.delegator.CargarUsuario3gAutenticadorDelegator">
			<initParams>
				<initParam>
					<name>providerURL</name>
					<value>application.premasivas.provider_url</value>
				</initParam>
				<initParam>
					<name>context</name>
					<value>
						application.premasivas.initial_context_factory
					</value>
				</initParam>
				<initParam>
					<name>dataSource</name>
					<value>
						application.premasivas.carga.usuario3g.dataSource
					</value>
				</initParam>	
				<initParam>
					<name>url</name>
					<value>
						application.premasivas.cu3g.url
					</value>
				</initParam>
				<initParam>
					<name>returnURL</name>
					<value>
						application.premasivas.cu3g.returnURL
					</value>
				</initParam>	
				<initParam>
					<name>oldpass</name>
					<value>
						application.premasivas.cu3g.oldpass
					</value>
				</initParam>
				<initParam>
					<name>posicionPass</name>
					<value>
						application.premasivas.cu3g.posicionPass
					</value>
				</initParam>				
				<initParam>
					<name>tipoUsuario</name>
					<value>
						application.premasivas.cu3g.tipo.usuario
					</value>
				</initParam>
			</initParams>
		</delegador>
		
		<delegador id="ArchivoErrorAutenticador" constructor="class"
			nombre="ve.com.digitel.premasivas.fase2.delegator.GenerarArchivoAutenticadorDelegator">
			<initParams>
				<initParam>
					<name>Directory</name>
					<value>application.premasivas.temp</value>
				</initParam>
			</initParams>
		</delegador>
	</delegadores>
</config>
